# Receiver Mode: "webhook" or "longpolling"
RECEIVER_MODE=webhook

# Bot Token (required for long polling, optional for webhook auto-registration)
TELEGRAM_BOT_TOKEN=your_bot_token_here

# === Webhook Mode Configuration ===
WEBHOOK_PORT=8443
TLS_CERT_PATH=/tls/cert.pem
TLS_KEY_PATH=/tls/key.pem
WEBHOOK_SECRET=ANY_RANDOM_STRING
ALLOWED_DOMAIN=your.public.domain.com
# Optional: Set this to auto-register webhook with Telegram on startup
WEBHOOK_URL=https://your.public.domain.com:8443/

# === Long Polling Mode Configuration ===
POLLING_TIMEOUT=30          # Seconds to wait for updates (0-60)
POLLING_LIMIT=100           # Max updates per request (1-100)
POLLING_RETRY_DELAY=5s      # Delay between retries on error
POLLING_MAX_ERRORS=10       # Max consecutive errors before stopping (0 = unlimited)
ALLOWED_UPDATES=            # Comma-separated update types (empty = all). E.g.: message,callback_query

# === Common Configuration ===
LOG_FILE_PATH=/app/logs/telegramreceiver.log

# Rate limiting
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_BURST=20

# Request limits
MAX_BODY_SIZE=1048576       # 1 MB
READ_TIMEOUT=10s
READ_HEADER_TIMEOUT=2s
WRITE_TIMEOUT=15s
IDLE_TIMEOUT=120s

# Circuit breaker
BREAKER_MAX_REQUESTS=5
BREAKER_INTERVAL=2m
BREAKER_TIMEOUT=60s

# Kubernetes-aware shutdown
DRAIN_DELAY=5s              # Wait for LB to stop routing before shutdown
SHUTDOWN_TIMEOUT=15s        # Max time for graceful shutdown
